{% extends 'shop/base.html' %}
{% block title %}Checkout | E-Shop{% endblock %}
{% block content %}
<h2 class="mb-4">Checkout</h2>
<div class="row g-4">
  <div class="col-md-7">
    <form method="post" class="card p-3 shadow-sm">{% csrf_token %}
      {{ form.non_field_errors }}
      <div class="row g-3">
        {% for field in form %}
          <div class="col-md-6">{{ field.label_tag }} {{ field }} {% if field.errors %}<div class="text-danger small">{{ field.errors|join:', ' }}</div>{% endif %}</div>
        {% endfor %}
      </div>
      <div class="d-grid mt-3"><button class="btn btn-success">Place Order</button></div>
    </form>
  </div>
  <div class="col-md-5">
    <div class="card p-3">
      <h5 class="mb-3">Order Summary</h5>
      <ul class="list-group list-group-flush small">
        {% for item in cart.items.all %}
          <li class="list-group-item d-flex justify-content-between">{{ item.product.name }} x {{ item.quantity }}<span>${{ item.get_cost }}</span></li>
        {% endfor %}
      </ul>
      <div class="mt-3 fw-semibold">Total: ${{ cart.get_total_price }}</div>
    </div>
  </div>
</div>
{% endblock %}
